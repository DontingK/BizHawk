<Project>
	<Import Project="MainSlnCommon.props" />
	<PropertyGroup>
		<DefineConstants>$(DefineConstants);EXE_PROJECT</DefineConstants>
		<OutputPath>$(MSBuildProjectDirectory)/../../output</OutputPath>
		<AssemblyName>$(MSBuildProjectName.Substring($([MSBuild]::Add($(MSBuildProjectName.LastIndexOf('.')), 1))))</AssemblyName>
	</PropertyGroup>
	<PropertyGroup Condition=" !$(IsTargetingNetFramework) ">
		<AssemblyName>$(TargetName)</AssemblyName>
	</PropertyGroup>
	<PropertyGroup Condition=" '$(Configuration)' == 'Debug' ">
		<OutputType>Exe</OutputType>
	</PropertyGroup>
	<PropertyGroup Condition=" '$(Configuration)' == 'Release' ">
		<OutputType>WinExe</OutputType>
	</PropertyGroup>
	<ItemGroup>
		<Compile Include="$(MSBuildProjectDirectory)/../BizHawk.Common/OSTailoredCode.cs" />
	</ItemGroup>
	<Target Condition="$(IsTargetingNetFramework)" Name="PostBuild" AfterTargets="PostBuildEvent">
		<ItemGroup>
			<NotExecFilesFromExecProj Include="$(OutputPath)*.deps.json" />
			<NotExecFilesFromExecProj Include="$(OutputPath)*.dll" />
			<NotExecFilesFromExecProj Include="$(OutputPath)*.pdb" />
			<NotExecFilesFromExecProj Include="$(OutputPath)*.xml" />
		</ItemGroup>
		<Move SourceFiles="@(NotExecFilesFromExecProj)" DestinationFolder="$(OutputPath)dll/" />
	</Target>
	<Target Name="PostPublish" AfterTargets="Publish">
		<ItemGroup>
			<NotExecFilesFromExecProj Include="$(OutputPath)publish/*.dll" Exclude="$(OutputPath)publish/$(TargetName).dll" />
			<NotExecFilesFromExecProj Include="$(OutputPath)publish/*.pdb" />
			<NotExecFilesFromExecProj Include="$(OutputPath)publish/*.xml" />
		</ItemGroup>
		<Move SourceFiles="@(NotExecFilesFromExecProj)" DestinationFolder="$(OutputPath)publish/dll/" />
	</Target>
</Project>
